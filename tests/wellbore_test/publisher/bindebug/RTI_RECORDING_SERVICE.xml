<dds
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="/opt/rti_connext_dds-5.2.3/resource/schema/rti_record.xsd"
>

    <!-- ****************************************************************** -->
    <!-- Default configuration file for RTI Recording Service -->
    <!-- ****************************************************************** -->

    <!-- Configuration name: default -->
    <!-- This configuration records all topics and all fields in the topics, for
        every topic discovered in domain 0. The data are always recorded in deserialized
        mode. Remote administration with Distributed Logger is active in domain 0. -->
    <recorder name="EDGE_Recorder">
        <annotation>
            <documentation>
                Record all topics in domain 0.
                Remote administration with Distributed Logger is enabled on domain 0.
            </documentation>
        </annotation>

        <verbosity>1</verbosity>

        <!-- Set replay compatibility to true so what we record is ensured to be
            replayable using RTI Replay Service -->
        <replay_compatibility>true</replay_compatibility>

        <!-- Enable remote administration of Recorder in domain 0. Enable Distributed
            Logger with filter level set to warning. -->
        <remote_access>
            <enabled>true</enabled>
            <remote_access_domain> domain0 </remote_access_domain>
            <distributed_logger>
                <enabled>true</enabled>
                <filter_level> WARNING </filter_level>
            </distributed_logger>
        </remote_access>

        <!-- Specify where to store the recorded data. -->
        <recorder_database>
            <database_name> /home/carrier/data/edge_dds_records.dat
            </database_name>
            <max_file_segments> 6000 </max_file_segments>
            <max_file_size> 200 MB </max_file_size>
            <rollover> true </rollover>
        </recorder_database>

        <!-- Create a DDS DomainParticipant in domain 0 with default QoS -->
        <domain name="domain0">
            <domain_id>100</domain_id>
            <deserialize_mode>RTIDDS_DESERIALIZEMODE_ALWAYS</deserialize_mode>
            <participant_qos>

                <resource_limits>
                    <type_code_max_serialized_length>4096
                    </type_code_max_serialized_length>
                    <type_object_max_serialized_length>4096
                    </type_object_max_serialized_length>
                </resource_limits>

                <!-- Enable these attributes when using ndds 5.0.0
                <property>
                <value>
                    <element>
                        <name>dds.transport.UDPv4.builtin.parent.message_size_max</name>
                        <value>65536</value>
                    </element>
                    <element>
                        <name>dds.transport.shmem.builtin.parent.message_size_max</name>
                        <value>65536</value>
                    </element>
                </value>
                </property> -->

            </participant_qos>
        </domain>

        <!-- Create a TopicGroup. A TopicGroup is a collection of Topics whose names
            match the POSIX expression 'topic_expr'. The POSIX expression 'field_expr' specifies
            which fields in the Topics to record. Note that a TopicGroup is not bound to a particular
            domain yet. In this example, the TopicGroup All means record all fields in all the
            matching Topics -->
        <topic_group name="All">
            <topics>
                <topic_expr> * </topic_expr>
            </topics>
            <field_expr> * </field_expr>
            <datareader_qos>
                <durability>
                    <kind> VOLATILE_DURABILITY_QOS </kind> 
                </durability>
            </datareader_qos>
        </topic_group>

        <!-- Create a RecordGroup. A RecordGroup controls which TopicGroups are recorded
            for a set of domains. Each recorded Topic is stored in a table with the format "<RecordGroupName>$<DomainName>$<TopicName>".
            In this configuration, we want to record data from topics in TopicGroup "All" from
            the domain with name "domain0". -->
        <record_group name="RecordAll">
            <!-- specify which domains to record from -->
            <domain_ref>
                <element> domain0 </element>
            </domain_ref>
            <!-- specify which topics to record (topic group names) -->
            <topic_ref>
                <element> All </element>
            </topic_ref>
        </record_group>
    </recorder>
</dds>
